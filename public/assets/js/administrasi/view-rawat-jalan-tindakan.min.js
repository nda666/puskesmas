$(document).ready(function(){var a=!1;window.do_job=a,$(".table-toggle").click(function(a){$(this).hasClass("compress")?$(this).removeClass("compress").addClass("expand"):$(this).addClass("compress").removeClass("expand"),$(this).parent().find("table").toggle()});var t=function(t){var n=$("#data-tab-tindakan").attr("data-source");$("#data-tab-tindakan form").addClass("loading"),a=!0,setTimeout(function(){$.get(n+"/"+t,function(a){a.response&&($.each(a.data[0],function(a,t){$('#data-result-tindakan [data-name="'+a+'"]').text(t||""),$('#data-konsultasi-tindakan [data-name="'+a+'"]').text(t||""),$('#data-tab-tindakan form [name="'+a+'"]').val(t)}),$('#data-tab-tindakan form [name="id"]').val(a.data[0].id_tindakan||""),$('#data-tab-tindakan form [name="keterangan"]').val(a.data[0].keterangan_tindakan||""),a.data[0].id_tindakan?($("#data-tab-tindakan form .hapus-tindakan").attr("data-id",a.data[0].id_tindakan),$("#data-tab-tindakan form .hapus-tindakan").attr("data-konsultasi",a.data[0].ruang_konsul_id),$("#data-tab-tindakan form .hapus-tindakan").removeAttr("disabled")):$("#data-tab-tindakan form .hapus-tindakan").attr("disabled","disabled"))}).always(function(){$("#data-tab-tindakan form").removeClass("loading"),a=!1})},0)},n=function(a){var n=$("#tab-tindakan").attr("data-source");$.get(n,function(n){if(n&&n.response){if($("#tab-tindakan").html(""),n.data.length<=0)return 0===$("#data-tab-tindakan form").parent().has("#not-found-konsultasi").length&&$("#data-tab-tindakan").prepend('<div id="not-found-konsultasi" class="ui message"><div class="content"><div class="header">Tidak Ada Data</div><p>Tidak ditemukan data konsultasi, silahkan isi Data Konsultasi terlebih dahulu</p></div></div>'),$("#tab-tindakan").html('<div class="item">Tidak ada data</item>'),$("#data-tab-tindakan form .field").addClass("disabled"),!1;for($("#menu-tab").sticky({offset:$(".right-navbar").height()+10}),$("#data-tab-tindakan #not-found-konsultasi").remove(),$("#data-tab-tindakan form .field").removeClass("disabled"),i=0;i<n.data.length;i++)0===i&&a?(t(n.data[i].id),n.data[i].check?$("#tab-tindakan").append('<a class="active item" data-id="'+n.data[i].id+'"><i class="green check icon"></i>'+n.data[i].created_at+"</a>"):$("#tab-tindakan").append('<a class="active item" data-id="'+n.data[i].id+'"><i class="close red icon"></i>'+n.data[i].created_at+"</a>")):n.data[i].check?$("#tab-tindakan").append('<a class="item" data-id="'+n.data[i].id+'"><i class="green check icon"></i>'+n.data[i].created_at+"</a>"):$("#tab-tindakan").append('<a class="item" data-id="'+n.data[i].id+'"><i class="close red icon"></i>'+n.data[i].created_at+"</a>")}})};$(window).on("look",function(){n(!0)}),$("#tab-tindakan").on("click","a.item",function(n){a||($("#tab-tindakan a.item.active").removeClass("active"),$("#tab-tindakan a.item").addClass(),$(this).addClass("active"),t($(this).attr("data-id"))),n.preventDefault()}),$("#data-tab-tindakan").on("submit",".form-tindakan",function(a){a.preventDefault();var i=$(this).find('[name="ruang_konsul_id"]').val(),d=$("#data-tab-tindakan .form-tindakan"),e=noty({modal:!0,text:"Simpan data Tindakan ini?",buttons:[{addClass:"ui positive small button",text:'<i class="icon save"></i>Simpan',onClick:function(a,e){var s=$(this),o=$(this).parent().find(".negative");s.addClass("loading disabled"),o.addClass("disabled"),$.post(d.attr("action"),d.serialize(),function(d){if(d.response){a.close();noty({text:d.message,type:"success",timeout:5e3,layout:"topRight"});t(i),n(!1)}else{noty({text:d.message,type:"warning",layout:"topRight"})}}).fail(function(a){noty({text:a.statusText,type:"error",layout:"topRight"})}).done(function(){s.removeClass("loading disabled"),o.removeClass("disabled")})}},{addClass:"ui negative small button",text:'<i class="icon close"></i>Batal',onClick:function(a,t){e.close()}}]})}),$("#data-tab-tindakan").on("click",".hapus-tindakan",function(a){var i=$(this).attr("data-konsultasi"),d=$(this);noty({modal:!0,text:"Hapus data Tindakan ini?",buttons:[{addClass:"ui positive small button",text:'<i class="icon trash"></i>Hapus',onClick:function(a,e){var s=$(this),o=$(this).parent().find(".negative");s.addClass("loading disabled"),o.addClass("disabled"),$.post(d.attr("data-action"),{id:d.attr("data-id"),_token:$('#data-tab-tindakan form [name="_token"]').val()},function(d){if(d.response){a.close();noty({text:d.message,type:"success",timeout:5e3,layout:"topRight"})}else{noty({text:d.message,type:"warning",layout:"topRight"})}t(i),n(!1)}).fail(function(a){noty({text:a.statusText,type:"error",timeout:5e3,layout:"topRight"})}).done(function(){s.removeClass("loading disabled"),o.removeClass("disabled")})}},{addClass:"ui negative small button",text:'<i class="icon close"></i>Batal',onClick:function(a,t){a.close()}}]});a.preventDefault()}),$("#data-tab-tindakan form").form({on:"submit",inline:!0,fields:{pengobatan:"empty"}})});