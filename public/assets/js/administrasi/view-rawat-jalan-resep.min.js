$(document).ready(function(){function a(a){noty({modal:!0,text:"Hapus resep obat yang anda pilih?",buttons:[{addClass:"ui positive small button",text:'<i class="icon trash"></i>Hapus',onClick:function(e,t){var n=$(this),o=$(this).parent().find(".negative");n.addClass("loading disabled"),o.addClass("disabled"),$.get($("#form-resep").attr("data-hapus"),{id:a},function(a){if(a&&a.response){i.ajax.reload();noty({text:a.message,layout:"topRight",timeout:5e3,type:"success"});e.close()}else{noty({text:a.message,layout:"topRight",timeout:5e3,type:"warning"})}}).error(function(a){console.log(a);noty({text:a.status+" "+a.statusText,layout:"topRight",timeout:5e3,type:"warning"})}).always(function(){n.removeClass("disabled loading"),o.removeClass("disabled")})}},{addClass:"ui negative small button",text:'<i class="icon close"></i>Tidak',onClick:function(a,e){a.close()}}]})}$("#resep-dropdown").dropdown({apiSettings:{url:$("#resep-dropdown").attr("data-source")+"?id="+$("#resep-dropdown").attr("data-id")+"&find={query}"}}),$("#data-konsultasi-resep thead th").addClass("center aligned");var e="#modal-resep-insert form",t="#modal-resep-insert";$(e+" input").keydown(function(a){return 13===a.keyCode?!1:void 0}),$(e+" input").change(function(){$(t).modal("refresh")});var n="#data-konsultasi-resep",i=$("#data-konsultasi-resep").DataTable({ajax:{url:$("#data-konsultasi-resep").data("source")},language:{url:$("#data-konsultasi-resep").data("lang")},lengthMenu:[[10,25,100,200,500,-1],[10,25,100,200,500,"Semua"]],searchDelay:1e3,stateSave:!1,scrollY:"60vh",scrollCollapse:!0,scrollX:!0,dom:"<'left no padding-bottom floated aligned sixteen wide mobile eight wide computer column'l><'right no padding-bottom aligned sixteen wide mobile eight wide computer column'f><'ui button-container sixteen wide tablet ten wide toolbars-resep column'><'sixteen wide column no padding top bottom'tr><'sixteen wide mobile four wide computer column'i><'right aligned sixteen wide mobile twelve wide computer column'p>",processing:!0,pagingType:"numbers",serverSide:!0,filter:!0,sort:!0,order:[[1,"asc"]],info:!0,columns:[{data:null,visible:!0,sortable:!1,searchable:!1,width:"7px",className:"text-center",render:function(a,e,t){return'<div style="margin-left: 7px;" class="ui checkbox-table checkbox"><input type="checkbox"> <label></label></div>'}},{data:"id",name:"resep.id"},{data:"nama_obat",name:"obat.nama"},{data:"nama",name:"pegawai.nama"},{data:"created_at",name:"resep.created_at"},{data:"action",name:"action",sortable:!1,searchable:!1,width:"70px",className:"actived text-center"}],drawCallback:function(){}});i.on("init.dt",function(){yadcf.init(i,[{column_number:0,filter_type:"text"},{column_number:1,filter_type:"text"},{column_number:2,filter_type:"text"},{column_number:3,filter_type:"range_date",date_format:"yyyy-mm-dd"}]),$(".yadcf-filter-wrapper").addClass("ui small action datatables-search input").css({display:"flex"}),$(".yadcf-filter-wrapper button").html('<i class="close icon"></i>'),$(".yadcf-filter-wrapper button").addClass("ui small icon button"),$("[id^=yadcf]").hide(),new $.fn.dataTable.Buttons(i,{dom:{container:{tag:"div",className:"ui group buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui tiny labeled icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"",className:""}},buttons:[{text:'<i class="plus icon"></i>Tambah',className:"primary icon tambah-resep-btn",titleAttr:"Tambah Resep Baru",action:function(a,n,o,s){$(e).form("clear"),$(e+' input[type="hidden"][name="_token"]').val($(e).attr("data-token")),$(e+' [name="rawat_jalan_id"]').val($(e).attr("data-id")),$(t+" .header").text("Tambah Data Resep"),$(t).modal({closable:!1,onApprove:function(){return form_submit(e,!1,function(){$(e).form("clear"),$(e+' input[type="hidden"][name="_token"]').val($(e).attr("data-token")),$(e+' [name="rawat_jalan_id"]').val($(e).attr("data-id")),i.ajax.reload()}),!1},onShow:function(){$(e).find("#resep-dropdown").addClass("multiple")}}).modal("show")}},{text:'<i class="trash icon"></i>Hapus',className:"negative hapus-resep-btn",titleAttr:"Hapus Resep Yang di Checklist",action:function(e,t,n,i){var o=t.rows($("#data-konsultasi-resep input:checked").parents("tr")).data();if(o.length<=0)return!1;var s=new Array;$.each(o,function(a,e){s.push(e.id)}),a(s)}}]}),new $.fn.dataTable.Buttons(i,{dom:{container:{tag:"div",className:"ui basic right floated buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui toggle tiny icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}},buttons:[{text:'<i class="icon refresh"></i>Refresh',className:"refresh-btn",action:function(a,e,t,n){table.ajax.reload()}},{text:'<i class="icon check"></i>Check',className:"check-btn",action:function(a,e,t,n){$("#data-konsultasi-resep .checkbox-table").checkbox("check")}},{text:'<i class="icon close"></i>Un-Check',className:"check-btn",action:function(a,e,t,n){$("#data-konsultasi-resep .checkbox-table").checkbox("uncheck")}},{text:'<i class="search icon"></i>Cari',className:"search-btn",action:function(a,e,t){$(t).toggleClass("active").removeClass("toggle"),$(t).hasClass("active")?$("[id^=yadcf]").show():$("[id^=yadcf]").hide(),table.columns.adjust()}},{text:'<i class="undo icon"></i>Clear',className:"clear-search-btn",action:function(a,e,t){yadcf.exResetAllFilters(table),table.columns.adjust()}}]}),i.buttons(0,1).container().prependTo($(".toolbars-resep")),$(".ui.button").popup()}),$(e).form({inline:!0,on:"submit",fields:{resep_id:["empty"]}}),$(n).on("click",".delete-btn",function(e){e.preventDefault(),i.ajax.reload();var t=i.row($(this).parents("tr")).data(),n=[t.id];return t?void a(n):!1}),$(n).on("click",".edit-btn",function(a){var n=i.row($(this).parents("tr")).data();return n?($(t+" .header").text("Ubah Data Resep - ID: "+n.id),$(e).form("clear"),i.ajax.reload(),$(e+' input[type="hidden"][name="_token"]').val($(e).attr("data-token")),$(e+' [name="rawat_jalan_id"]').val(n.rawat_jalan_id),$(e+' [name="resep"]').val(n.resep),$(e+' [name="id"]').val(n.id),void $(t).modal({closable:!1,onApprove:function(){return form_submit(e,!1,function(){i.ajax.reload()}),!1},onShow:function(){$(e).find('[name="obat_id"]').val(n.obat_id),$(e).find("#resep-dropdown").dropdown("set text",n.nama_obat),$(e).find("#resep-dropdown").removeClass("multiple")}}).modal("show")):!1})});