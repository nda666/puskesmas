$(document).ready(function(a){function t(a){noty({modal:!0,text:"Anda hendak menghapus data poli?",buttons:[{addClass:"ui positive small button",text:'<i class="icon trash"></i>Hapus',onClick:function(t,e){var o=$(this),l=$(this).parent().find(".negative");o.addClass("loading disabled"),l.addClass("disabled"),$.post($(n).attr("data-delete"),{id:a,_token:$(n+' [name="_token"]').val()},function(a){if(a&&a.response){i.ajax.reload();noty({text:a.message,layout:"topRight",timeout:5e3,type:"success"});t.close()}else{noty({text:a.message,layout:"topRight",timeout:5e3,type:"warning"})}}).error(function(a){console.log(a);noty({text:a.status+" "+a.statusText,layout:"topRight",timeout:5e3,type:"warning"})}).always(function(){o.removeClass("disabled loading"),l.removeClass("disabled")})}},{addClass:"ui negative small button",text:'<i class="icon close"></i>Tidak',onClick:function(a,t){a.close()}}]})}var e="#modal-insert",n="#form-insert";$(e+" .closer-modal, "+e+" .negative.button").click(function(a){a.preventDefault(),$(e).modal("hide")}),$(n+" input").keydown(function(a){return 13===a.keyCode?!1:void 0});var i=$("#data-poli").DataTable({ajax:{url:$("#data-poli").data("source")},language:{url:$("#data-poli").data("lang")},lengthMenu:[[10,25,100,200,500,-1],[10,25,100,200,500,"Semua"]],searchDelay:1e3,stateSave:!1,scrollY:"60vh",scrollCollapse:!0,scrollX:!0,dom:"<'left no padding-bottom floated aligned sixteen wide mobile eight wide computer column'l><'right no padding-bottom aligned sixteen wide mobile eight wide computer column'f><'ui button-container sixteen wide tablet ten wide toolbars column'><'sixteen wide column no padding top bottom'tr><'sixteen wide mobile four wide computer column'i><'right aligned sixteen wide mobile twelve wide computer column'p>",processing:!0,pagingType:"numbers",serverSide:!0,filter:!0,sort:!0,info:!0,order:[[1,"asc"]],columns:[{data:null,visible:!0,sortable:!1,searchable:!1,width:"7px",className:"text-center collapsing",render:function(a,t,e){return'<div style="margin-left: 7px;" class="ui checkbox-table checkbox"><input type="checkbox"> <label></label></div>'}},{data:"id",name:"id",className:"collapsing"},{data:"nama",name:"nama"},{data:"action",name:"action",className:"right aligned collapsing",searchable:!1,sortable:!1}],drawCallback:function(){$(".dataTables_filter").addClass("ui datatables-search input")}});i.on("init.dt",function(){yadcf.init(i,[{column_number:1,filter_type:"text",filter_reset_button_text:!1},{column_number:2,filter_type:"text",filter_reset_button_text:!1}]),$(".yadcf-filter-wrapper").addClass("ui datatables-search input").css({display:"flex"}),new $.fn.dataTable.Buttons(i,{dom:{container:{tag:"div",className:"ui group buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui tiny labeled icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"",className:""}},buttons:[{text:'<i class="plus icon"></i>Tambah',className:"primary icon tambah-btn",action:function(a,t,i,o){$(e+" .header").text("Tambah Data poli"),$(e).modal({closable:!1,onShow:function(){$(n+' input[name="id"],'+n+' input[name="nama"]').val("")}}).modal("show")}},{text:'<i class="trash icon"></i>Hapus',className:"negative hapus-btn",action:function(a,e,n,i){var o=e.rows($("#data-poli input:checked").parents("tr")).data();if(o.length<=0)return!1;var l=new Array;$.each(o,function(a,t){l.push(t.id)}),t(l)}}]}),new $.fn.dataTable.Buttons(i,{dom:{container:{tag:"div",className:"ui basic right floated buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui toggle tiny icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}},buttons:[{text:'<i class="icon refresh"></i>Refresh',className:"refresh-btn",action:function(a,t,e,n){i.ajax.reload()}},{text:'<i class="icon check"></i>Check',className:"check-btn",action:function(a,t,e,n){$("#data-poli .checkbox-table").checkbox("check")}},{text:'<i class="icon close"></i>Un-Check',className:"check-btn",action:function(a,t,e,n){$("#data-poli .checkbox-table").checkbox("uncheck")}},{text:'<i class="search icon"></i>Cari',className:"search-btn",action:function(a,t,e){$(e).toggleClass("active").removeClass("toggle"),$(e).hasClass("active")?$("[id^=yadcf]").show():$("[id^=yadcf]").hide(),i.columns.adjust()}},{text:'<i class="undo icon"></i>Clear',className:"clear-search-btn",action:function(a,t,e){yadcf.exResetAllFilters(i),i.columns.adjust()}}]}),i.buttons(0,1).container().prependTo($(".toolbars")),$("[id^=yadcf]").hide(),i.columns.adjust(),i.on("select",function(a,t,e,n){$(".ubah-btn, .hapus-btn").removeClass("disabled"),$(".hapus-btn").attr("data-content","Hapus data resep obat yang Anda pilih?"),$(".ubah-btn").attr("data-content","Ubah data obat yang Anda pilih?")}).on("deselect",function(a,t,e,n){var i=t.row({selected:!0}).data();i||$(".ubah-btn, .hapus-btn").addClass("disabled")})}),$(".buttons .button").popup(),$(n+" .dropdown").dropdown(),$(n).form({on:"submit",inline:!0,fields:{nama:"empty"}}),$(e+" .approve").click(function(a){form_submit(n,!1,function(){$(n+' input[type="hidden"][name="_token"]').val($(n).attr("data-token")),""==$(n+' [name="id"]').val()&&$(n+' [name="nama"]').val(""),i.ajax.reload()})}),$("#data-poli").on("click",".edit-btn",function(a){a.preventDefault(),i.ajax.reload();var t=i.row($(this).parents("tr")).data();return t?($(e+" .header").text("Ubah Data Poli - ID: "+t.id),$(n).form("clear"),$(n+' input[name="id"]').val(t.id),$(n+' input[type="hidden"][name="_token"]').val($(n).attr("data-token")),$(n+' input[name="nama"]').val(t.nama),void $(e).modal({closable:!1,onApprove:function(){return!1}}).modal("show")):!1}),$("#data-poli").on("click",".delete-btn",function(a){a.preventDefault();var e=i.row($(this).parents("tr")).data();t([e.id])})});