$(document).ready(function(t){function a(t){noty({modal:!0,text:"Anda hendak menghapus data obat?",buttons:[{addClass:"ui positive small button",text:'<i class="icon trash"></i>Hapus',onClick:function(a,e){var i=$(this),s=$(this).parent().find(".negative");i.addClass("loading disabled"),s.addClass("disabled"),$.post($(n).attr("data-delete"),{id:t,_token:$(n+' [name="_token"]').val()},function(t){if(t&&t.response){o.ajax.reload();noty({text:t.message,layout:"topRight",timeout:5e3,type:"success"});a.close()}else{noty({text:t.message,layout:"topRight",timeout:5e3,type:"warning"})}}).error(function(t){console.log(t);noty({text:t.status+" "+t.statusText,layout:"topRight",timeout:5e3,type:"warning"})}).always(function(){i.removeClass("disabled loading"),s.removeClass("disabled")})}},{addClass:"ui negative small button",text:'<i class="icon close"></i>Tidak',onClick:function(t,a){t.close()}}]})}var e="#modal-insert",n="#form-insert";$(e+" .closer-modal, "+e+" .negative.button").click(function(t){t.preventDefault(),$(e).modal("hide")}),$(n+" input").keydown(function(t){return 13===t.keyCode?!1:void 0});var o=$("#data-obat").DataTable({ajax:{url:$("#data-obat").data("source")},language:{url:$("#data-obat").data("lang")},lengthMenu:[[10,25,100,200,500,-1],[10,25,100,200,500,"Semua"]],searchDelay:1e3,stateSave:!1,scrollY:"60vh",scrollCollapse:!0,scrollX:!0,dom:"<'left no padding-bottom floated aligned sixteen wide mobile eight wide computer column'l><'right no padding-bottom aligned sixteen wide mobile eight wide computer column'f><'ui button-container sixteen wide tablet ten wide toolbars column'><'sixteen wide column no padding top bottom'tr><'sixteen wide mobile four wide computer column'i><'right aligned sixteen wide mobile twelve wide computer column'p>",processing:!0,pagingType:"numbers",serverSide:!0,filter:!0,sort:!0,info:!0,order:[[1,"asc"]],columns:[{data:null,visible:!0,sortable:!1,searchable:!1,width:"7px",className:"text-center collapsing",render:function(t,a,e){return'<div style="margin-left: 7px;" class="ui checkbox-table checkbox"><input type="checkbox"> <label></label></div>'}},{data:"id",name:"id"},{data:"kode",name:"kode"},{data:"nama",name:"nama"},{data:"action",name:"action",className:"right aligned collapsing",searchable:!1,sortable:!1}],drawCallback:function(){$(".buttons .button").popup()}});o.on("init.dt",function(){yadcf.init(o,[{column_number:1,filter_type:"text",filter_reset_button_text:!1},{column_number:2,filter_type:"text",filter_reset_button_text:!1},{column_number:3,filter_type:"text",filter_reset_button_text:!1}]),$(".yadcf-filter-wrapper").addClass("ui datatables-search input").css({display:"flex"}),$("#yadcf-filter-wrapper--data-obat-0").find("input").css("width","30px"),$("#yadcf-filter-wrapper--data-obat-1").find("input").css("width","60px"),$("#yadcf-filter-wrapper--data-obat-2").find("input").css("width","60px"),new $.fn.dataTable.Buttons(o,{dom:{container:{tag:"div",className:"ui group buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui tiny labeled icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"",className:""}},buttons:[{text:'<i class="plus icon"></i>Tambah',className:"primary icon tambah-btn",action:function(t,a,o,i){$(e+" .header").text("Tambah Data Obat"),$(e).modal({closable:!1,onApprove:function(){return!1},onShow:function(){$(n+' input[name="id"],'+n+' input[name="nama"], '+n+' input[name="kode"]').val("")}}).modal("show")}},{text:'<i class="trash icon"></i>Hapus',className:"negative hapus-btn",action:function(t,e,n,o){var i=e.rows($("#data-obat input:checked").parents("tr")).data();if(i.length<=0)return!1;var s=new Array;$.each(i,function(t,a){s.push(a.id)}),a(s)}}]}),new $.fn.dataTable.Buttons(o,{dom:{container:{tag:"div",className:"ui basic right floated buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"ui toggle tiny icon button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}},buttons:[{text:'<i class="icon refresh"></i>Refresh',className:"refresh-btn",action:function(t,a,e,n){o.ajax.reload()}},{text:'<i class="icon check"></i>Check',className:"check-btn",action:function(t,a,e,n){$("#data-obat .checkbox-table").checkbox("check")}},{text:'<i class="icon close"></i>Un-Check',className:"check-btn",action:function(t,a,e,n){$("#data-obat .checkbox-table").checkbox("uncheck")}},{text:'<i class="search icon"></i>Cari',className:"search-btn",action:function(t,a,e){$(e).toggleClass("active").removeClass("toggle"),$(e).hasClass("active")?$("[id^=yadcf]").show():$("[id^=yadcf]").hide(),o.columns.adjust()}},{text:'<i class="undo icon"></i>Clear',className:"clear-search-btn",action:function(t,a,e){yadcf.exResetAllFilters(o),o.columns.adjust()}}]}),o.buttons(0,1).container().prependTo($(".toolbars")),$("[id^=yadcf]").hide(),o.columns.adjust(),o.on("select",function(t,a,e,n){$(".ubah-btn, .hapus-btn").removeClass("disabled"),$(".hapus-btn").attr("data-content","Hapus data resep obat yang Anda pilih?"),$(".ubah-btn").attr("data-content","Ubah data obat yang Anda pilih?")}).on("deselect",function(t,a,e,n){var o=a.row({selected:!0}).data();o||$(".ubah-btn, .hapus-btn").addClass("disabled")})}),$(n+" .dropdown").dropdown(),$(n).form({on:"submit",inline:!0,fields:{nama:"empty"}}),$(e+" .approve").click(function(t){form_submit(n,!1,function(){o.ajax.reload(),$(n).form("clear"),$(n+' input[name="_token"]').val($(n).attr("data-token"))})}),$("#data-obat").on("click",".edit-btn",function(t){t.preventDefault(),o.ajax.reload();var a=o.row($(this).parents("tr")).data();return a?($(e+" .header").text("Ubah Data obat - ID: "+a.id),void $(e).modal({closable:!1,onApprove:function(){return!1},onShow:function(){$(n+' input[name="id"]').val(a.id),$(n+' input[type="hidden"][name="_token"]').val($(n).attr("data-token")),$(n+' input[name="nama"]').val(a.nama),$(n+' input[name="kode"]').val(a.kode)}}).modal("show")):!1}),$("#data-obat").on("click",".edit-btn",function(t){t.preventDefault(),o.ajax.reload();o.row($(this).parents("tr")).data()})});